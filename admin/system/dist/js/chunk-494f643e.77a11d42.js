(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-494f643e"],{"4e68":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[1==t.siteStep?[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"130px"}},[r("el-form-item",{attrs:{label:"FTP "+t.$t("server_address")+":"}},[r("el-input",{staticClass:"max-width",model:{value:t.siteftpsettingForm.host,callback:function(e){t.$set(t.siteftpsettingForm,"host",e)},expression:"siteftpsettingForm.host"}}),r("div",{staticClass:"help-inline"},[t._v(t._s(t.$t("FTP_server_IP_site_domain")))])],1),r("el-form-item",{attrs:{label:"FTP "+t.$t("server_port")+":"}},[r("el-input",{staticClass:"max-width",model:{value:t.siteftpsettingForm.port,callback:function(e){t.$set(t.siteftpsettingForm,"port",e)},expression:"siteftpsettingForm.port"}}),r("div",{staticClass:"help-inline"},[t._v(t._s(t.$t("default_for_the_21st")))])],1),r("el-form-item",{attrs:{label:"FTP "+t.$t("account")+":"}},[r("el-input",{staticClass:"max-width",model:{value:t.siteftpsettingForm.username,callback:function(e){t.$set(t.siteftpsettingForm,"username",e)},expression:"siteftpsettingForm.username"}}),r("div",{staticClass:"help-inline"},[t._v(t._s(t.$t("accounts_supreme_authority")))])],1),r("el-form-item",{attrs:{label:"FTP "+t.$t("password")+":"}},[r("el-input",{staticClass:"max-width",model:{value:t.siteftpsettingForm.password,callback:function(e){t.$set(t.siteftpsettingForm,"password",e)},expression:"siteftpsettingForm.password"}})],1),r("el-form-item",{attrs:{label:t.$t("sitepath")+":"}},[r("el-input",{staticClass:"max-width",model:{value:t.siteftpsettingForm.attachdir,callback:function(e){t.$set(t.siteftpsettingForm,"attachdir",e)},expression:"siteftpsettingForm.attachdir"}}),r("div",{staticClass:"help-inline"},[t._v(t._s(t.$t("site_absolute_path_root_directory")))])],1),r("el-form-item",{attrs:{label:t.$t("use_Passive_Mode")+":"}},[r("el-radio-group",{model:{value:t.siteftpsettingForm.pasv,callback:function(e){t.$set(t.siteftpsettingForm,"pasv",e)},expression:"siteftpsettingForm.pasv"}},[r("el-radio",{attrs:{label:"1",border:""}},[t._v(t._s(t.$t("yes")))]),r("el-radio",{attrs:{label:"0",border:""}},[t._v(t._s(t.$t("no")))])],1),r("div",{staticClass:"help-inline"},[t._v(t._s(t.$t("general_condition_passive_mode")))])],1),r("el-form-item",{attrs:{label:t.$t("enable_secure_link")+":"}},[r("el-radio-group",{model:{value:t.siteftpsettingForm.ssl,callback:function(e){t.$set(t.siteftpsettingForm,"ssl",e)},expression:"siteftpsettingForm.ssl"}},[r("el-radio",{attrs:{label:"1",border:""}},[t._v(t._s(t.$t("yes")))]),r("el-radio",{attrs:{label:"0",border:""}},[t._v(t._s(t.$t("no")))])],1),r("div",{staticClass:"help-inline"},[t._v(t._s(t.$t("notice_FTP_open_SSL")))])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getData("formSubmit")}}},[t._v(t._s(t.$t("confirm")))])],1)],1)]:2==t.siteStep?[r("el-card",{staticClass:"box-card",staticStyle:{background:"rgb(240, 249, 235)","text-align":"center"},attrs:{shadow:"hover"}},[r("p",[t._v(t._s(t.$t("upgrade_cannot_access_file")))]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleretry}},[t._v(t._s(t.$t("retry")))])],1)]:3==t.siteStep?[r("el-card",{staticClass:"box-card",staticStyle:{background:"rgb(240, 249, 235)","text-align":"center"},attrs:{shadow:"hover"}},[r("p",[t._v(t._s(t.$t("upgrade_backuping")))])])]:4==t.siteStep?[r("el-card",{staticClass:"box-card",staticStyle:{background:"rgb(240, 249, 235)","text-align":"center"},attrs:{shadow:"hover"}},[r("p",[t._v(t._s(t.$t("upgrade_backup_error")))]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleretry}},[t._v(t._s(t.$t("retry")))])],1)]:5==t.siteStep?[r("el-card",{staticClass:"box-card",staticStyle:{background:"rgb(240, 249, 235)","text-align":"center"},attrs:{shadow:"hover"}},[r("p",[t._v(t._s(t.$t("upgrade_backup_complete")))])])]:6==t.siteStep?[r("el-card",{staticClass:"box-card",staticStyle:{background:"rgb(240, 249, 235)","text-align":"center"},attrs:{shadow:"hover"}},[r("p",[t._v(t._s(t.$t("upgrade_ftp_upload_error",{file:t.siteftpsettingError.file})))]),r("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.getData("fptErroragainUpdate")}}},[t._v(t._s(t.$t("Upload_again")))]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.getData("fptErroragain")}}},[t._v(t._s(t.$t("founder_upgrade_reset_ftp")))])],1)]:7==t.siteStep?[r("el-card",{staticClass:"box-card",staticStyle:{background:"rgb(240, 249, 235)","text-align":"center"},attrs:{shadow:"hover"}},[r("p",[t._v(t._s(t.$t("upgrade_copy_error",{file:t.copyData.file})))]),r("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.getData("againCopy")}}},[t._v(t._s(t.$t("founder_upgrade_recopy")))]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.getData("againCopyFtp")}}},[t._v(t._s(t.$t("founder_upgrade_set_ftp")))])],1)]:8==t.siteStep?[r("el-card",{staticClass:"box-card",staticStyle:{background:"rgb(240, 249, 235)","text-align":"center"},attrs:{shadow:"hover"}},[r("p",[t._v(t._s(t.$t("upgrade_file_successful")))])])]:9==t.siteStep?[r("div",{staticStyle:{height:"440px"}},[r("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{marginheight:"0",marginwidth:"0",allowtransparency:"true",frameborder:"0",src:t.iframeUrl}})])]:t._e()],2)},s=[],i=(r("96cf"),r("1da1")),n={props:["returnData"],data:function(){return{siteStep:0,siteftpsettingUrl:"",siteftpsettingForm:{host:"",port:"21",username:"",password:"",attachdir:"",pasv:"0",ssl:"0"},siteftpsettingError:{file:"",againUpdate:"",ftpUrl:""},backfileUrl:"",completeUrl:"",copyData:{file:"",againUpdate:"",ftpUrl:""},iframeUrl:""}},created:function(){this.returnData.iframes?(this.iframeUrl=this.returnData.url,this.siteStep=9):this.getData()},methods:{getData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,n,o,l,p,c,u,d,f,m,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("backfile"!=t){r.next=7;break}return r.next=3,e.axios.post(e.backfileUrl);case 3:a=r.sent,s=a.data,r.next=54;break;case 7:if("fptErroragainUpdate"!=t){r.next=14;break}return r.next=10,e.axios.post(e.siteftpsettingError.againUpdate);case 10:i=r.sent,s=i.data,r.next=54;break;case 14:if("fptErroragain"!=t){r.next=21;break}return r.next=17,e.axios.post(e.siteftpsettingError.ftpUrl);case 17:n=r.sent,s=n.data,r.next=54;break;case 21:if("againCopy"!=t){r.next=28;break}return r.next=24,e.axios.post(e.copyData.againUpdate);case 24:o=r.sent,s=o.data,r.next=54;break;case 28:if("againCopyFtp"!=t){r.next=35;break}return r.next=31,e.axios.post(e.copyData.ftpUrl);case 31:l=r.sent,s=l.data,r.next=54;break;case 35:if("formSubmit"!=t){r.next=42;break}return r.next=38,e.axios.post(e.siteftpsettingUrl,{siteftp:e.siteftpsettingForm});case 38:p=r.sent,s=p.data,r.next=54;break;case 42:if("complete"!=t){r.next=49;break}return r.next=45,e.axios.post(e.completeUrl);case 45:c=r.sent,s=c.data,r.next=54;break;case 49:return u={version:e.returnData.version?e.returnData.version:"",locale:e.returnData.locale?e.returnData.locale:"",charset:e.returnData.charset?e.returnData.charset:""},r.next=52,e.axios.post("admin.php?mod=system&op=intsystemupgrade&operation=patch&step=4",u);case 52:d=r.sent,s=d.data;case 54:if(!s.upgradeNone){r.next=60;break}return f={upgradeNone:!0},e.$emit("handleStep",f),r.abrupt("return",!1);case 60:if(!s.upgradeError){r.next=66;break}return f={upgradeError:!0},e.$emit("handleStep",f),r.abrupt("return",!1);case 66:if(!s.bbclosed){r.next=72;break}return m={template:"bbclosed"},e.$emit("handleStep",m),r.abrupt("return",!1);case 72:if(!s.siteftpsetting){r.next=78;break}return e.siteStep=1,e.siteftpsettingUrl=s.url,r.abrupt("return",!1);case 78:if(!s.againsiteftpsetting){r.next=83;break}return e.siteStep=2,r.abrupt("return",!1);case 83:if(!s.backfile){r.next=90;break}return e.siteStep=3,e.backfileUrl=s.url,setTimeout((function(){e.getData("backfile")}),1e3),r.abrupt("return",!1);case 90:if(!s.destfile){r.next=95;break}return e.siteStep=4,r.abrupt("return",!1);case 95:if(!s.complete){r.next=102;break}return e.siteStep=5,e.completeUrl=s.url,setTimeout((function(){e.getData("complete")}),1e3),r.abrupt("return",!1);case 102:if(!s.ftpError){r.next=110;break}return e.siteStep=6,e.siteftpsettingError.file=s.file,e.siteftpsettingError.againUpdate=s.againUpdate,e.siteftpsettingError.ftpUrl=s.ftpUrl,r.abrupt("return",!1);case 110:if(!s.copyError){r.next=118;break}return e.siteStep=7,e.copyData.file=s.file,e.copyData.againUpdate=s.againUpdate,e.copyData.ftpUrl=s.ftpUrl,r.abrupt("return",!1);case 118:if(!s.updateMysql){r.next=124;break}return e.siteStep=8,setTimeout((function(){e.iframeUrl=s.url,e.siteStep=9}),1e3),r.abrupt("return",!1);case 124:if(!s.nextStep){r.next=128;break}return g={template:5},e.$emit("handleStep",g),r.abrupt("return",!1);case 128:case"end":return r.stop()}}),r)})))()},handleretry:function(){window.location.reload()},createIframe:function(t){this.siteStep=9,document.getElementById("updateMysql").innerHTML='<iframe  marginheight="0" marginwidth="0" allowtransparency="true" frameborder="0"  src="'+t+'" style="width:100%;height:100%;"></iframe>'}},components:{},mounted:function(){}},o=n,l=(r("d23e"),r("2877")),p=Object(l["a"])(o,a,s,!1,null,"621b4e31",null);e["default"]=p.exports},d23e:function(t,e,r){"use strict";var a=r("ef07"),s=r.n(a);s.a},ef07:function(t,e,r){}}]);